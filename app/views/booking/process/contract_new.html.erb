<%= render 'shared/three_steps_navbar', step: step %>
<div class="contract-page-wrapper">
  <div class="contract-page-header">
    <h2>Rental Contract</h2>
  </div>
  <div class="contract-page-container">
    <div class="contract-user-form">
      <i class="fas fa-arrow-left back-arrow change-form d-none"></i>
      <span class="info-text">
        Hi <%= @booking.user.first_name %>, <br>
        Please complete the following information to generate the rental agreement.
      </span>
      <div class="line"></div>
      <%= simple_form_for @booking, method: :put, url: wizard_path do |b| %>
        <%= b.simple_fields_for :user do |u| %>
          <%= u.input_field :id, as: :hidden %>
          <%= u.simple_fields_for :address do |a| %>
            <%= a.input_field :id, as: :hidden %>
            <%= a.input :street, wrapper_html: {class: 'contract-user-inputs'} %>
            <%= a.input :zip, wrapper_html: {class: 'contract-user-inputs'} %>
            <%= a.input :city, wrapper_html: {class: 'contract-user-inputs'} %>
            <%= a.input :country, label: 'Country', collection: @countries, selected: 'Germany', wrapper_html:{ class: 'contract-user-inputs'} %>
          <% end %>
        <% end %>
        <div class="signature-fields d-none">
          <%= b.simple_fields_for :contract do |c| %>
            <%= c.input_field :id, as: :hidden %>
            <%= c.input :signature, label: 'Please type in your full name', as: :text, class: 'signature-pad' %>
            <%= c.input :signed_date, as: :hidden, input_html: {value: Date.today} %>
          <% end %>
        </div>
        <div class="stacey-button reverse-hover change-form" id="sign-next-button">Next</div>
        <%= b.submit 'Sign Contract', class: 'stacey-button reverse-hover sign-button d-none' %>
      <% end %>
    </div>
    <div id="pdf">
      <!-- this is loading the contract as PDF -->
      <embed src="/bookings/<%= @booking.booking_auth_token %>/<%= @booking.id %>/contracts/new.pdf" type="application/pdf">
    </div>
  </div>
</div>
<%= render 'shared/footer' %>

