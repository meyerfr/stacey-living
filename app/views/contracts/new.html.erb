<%= render 'shared/three_steps_navbar', step: 2 %>
<div class="contract-page-wrapper">
  <h2 class="contract-page-header">Rental Contract</h2>
  <div class="contract-page-container">
    <div class="contract-user-form">
      <span class="info-text">There are just a few more information we need to set up the Contract.</span>
      <%= simple_form_for @contract, method: :post, url: booking_contracts_path(@booking) do |m| %>
        <%= m.simple_fields_for :user do |f| %>
          <%= f.input :street, wrapper_html: {class: 'contract-user-inputs'} %>
          <%= f.input :city, wrapper_html: {class: 'contract-user-inputs'} %>
          <%= f.input :zipcode, wrapper_html: {class: 'contract-user-inputs'} %>
          <%= f.input :country, as: :string, wrapper_html: {class: 'contract-user-inputs'} %>
        <% end %>
        <div class="signature-fields d-none">
          <%= m.input :signature, as: :text, class: 'signature-pad' %>
          <%= m.input :signed_date, as: :hidden, value: Date.today %>
        </div>
        <div class="stacey-button" id="sign-next-button">Next</div>
        <%= m.submit 'Sign Contract', class: 'stacey-button reverse-hover d-none' %>
      <% end %>
    </div>
    <div id="pdf">
      <!-- this is loading the contract as PDF -->
      <embed src="/bookings/<%= @booking.booking_auth_token %>/<%= @booking.id %>/contracts/new.pdf" type="application/pdf">
    </div>
  </div>
</div>
<%= link_to 'payment', booking_payment_path(@booking.booking_auth_token, @booking.id) %>
<%= render 'shared/footer' %>
